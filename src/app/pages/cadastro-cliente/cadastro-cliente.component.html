<ng-template #rt let-r="result" let-t="term">
	<ngb-highlight [result]="r" [term]="t"></ngb-highlight>
</ng-template>
<div class="cadastro styleCadastro">
	<div>
		<div class="col-md-12 title">
			<h2>Cadastro de Clientes</h2>
		</div>

		<form class="form col-md-12" [formGroup]="clienteForm">
			<div class="row">
				<div class="col-md-4 form-group">
					<label>Nome</label>					
					<input type="text" [ngClass]="{'x-label': submitted && clienteForm.controls['NM_CLIENTE'].errors}"
						class="form-control" formControlName="NM_CLIENTE" [ngbTypeahead]="search" [resultTemplate]="rt"
						[inputFormatter]="formatter" (selectItem)="selectCliente($event.item)">
				</div>
				<div class="col-md-4 form-group">
					<label>Razão Social</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['RAZAO_SOCIAL'].errors}"
						class="form-control" formControlName="RAZAO_SOCIAL">
				</div>
				<div class="col-md-4 form-group">
					<label>CNPJ / CPF</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['CPF'].errors}"
						class="form-control" formControlName="CPF">
				</div>
				<div class="col-md-3 form-group">
					<label>Email</label>
					<input type="email" [ngClass]="{'error-label': submitted && clienteForm.controls['EMAIL'].errors}"
						class="form-control" formControlName="EMAIL">
				</div>
				<div class="col-md-3 " formArrayName="TELEFONES" *ngFor="let item of clienteForm.get('TELEFONES').value; let i = index">
					<div class="form-group" [formGroupName]="i">
						<label>Telefone {{i+1}}</label>
						<input type="text"
							class="form-control" formControlName="TELEFONE">
					</div>					
				</div>	
							
				<div class="col-md-4 form-group">
					<label>Nome Contato</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['NM_CONTATO'].errors}"
						class="form-control" formControlName="NM_CONTATO">
				</div>
				<div class="col-md-4 form-group">
					<label>RG Contato</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['RG'].errors}"
						class="form-control" formControlName="RG">
				</div>
				<div class="col-md-4 form-group">
					<label>Lojista</label>
					<select class="form-control" formControlName="LOJISTA"
						[ngClass]="{'error-label': submitted && clienteForm.controls['LOJISTA'].errors}">
						<option value="1">Sim</option>
						<option value="0">Não</option>
					</select>
				</div>
				<div class="col-md-4 form-group">
					<label>CEP</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['CEP'].errors}"
						class="form-control" formControlName="CEP">
				</div>
				<div class="col-md-4 form-group">
					<label>Endereço</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['ENDERECO'].errors}"
						class="form-control" formControlName="ENDERECO">
				</div>
				<div class="col-md-4 form-group">
					<label>Número</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['NUMERO'].errors}"
						class="form-control" formControlName="NUMERO">
				</div>
				<div class="col-md-3 form-group">
					<label>Complemento</label>
					<input type="text" class="form-control" formControlName="COMPLEMENTO">
				</div>
				<div class="col-md-3 form-group">
					<label>Bairro</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['BAIRRO'].errors}"
						class="form-control" formControlName="BAIRRO">
				</div>
				<div class="col-md-3 form-group">
					<label>Cidade</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['CIDADE'].errors}"
						class="form-control" formControlName="CIDADE">
				</div>
				<div class="col-md-3 form-group">
					<label>Estado</label>
					<input type="text" [ngClass]="{'error-label': submitted && clienteForm.controls['ESTADO'].errors}"
						class="form-control" formControlName="ESTADO">
				</div>
			</div>
		</form>
		<div class="col-md-12">
			<button class="btn btn-delvetro" (click)="submitCliente()">
				<span class="btn-label"><i class="fa fa-check"></i>
				</span>Salvar
			</button>
			<button class="btn btn-delvetro" (click)="resetForm()">
				<span class="btn-label"><i class="fa fa-refresh"></i>
				</span>Limpar
			</button>
		</div>
	</div>
</div>
