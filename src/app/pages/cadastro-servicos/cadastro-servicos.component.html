<ng-template #rt let-r="result" let-t="term">
	<ngb-highlight [result]="r" [term]="t"></ngb-highlight>
</ng-template>
<div class="servicos styleCadastro">
	<div class="col-md-12 title">
		<h2>Cadastro de Serviços</h2>
	</div>
	<form class="form col-md-12" [formGroup]="servicosForm">
		<div class="row">
			<div class="col-md-4 form-group">
				<label>Descrição</label>
				
				<input type="text" class="form-control" formControlName="DESCRICAO" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter"
				(selectItem)="selectCliente($event.item)" [ngClass]="{'error': submitted && servicosForm.controls['DESCRICAO'].errors}">
			</div>
			<div class="col-md-2 form-group">
				<label>Tipo</label>
				<select class="form-control" formControlName="ID_TIPO"
					[ngClass]="{'error': submitted && servicosForm.controls['ID_TIPO'].errors}">
					<option *ngFor="let item of comboTipo" [ngValue]="item.VALOR">{{item.LABEL}}</option>
				</select>
			</div>
			<div class="col-md-2 form-group">
				<label>Externo</label>
				<select class="form-control" formControlName="EXTERNO"
					[ngClass]="{'error': submitted && servicosForm.controls['EXTERNO'].errors}">
					<option value="1">Sim</option>
					<option value="0">Não</option>
				</select>
			</div>
			
			<div class="col-md-2 form-group">
				<label>Unidade Cobrança</label>
				<select class="form-control" formControlName="UNIDADE_CUSTO"
					[ngClass]="{'error': submitted && servicosForm.controls['UNIDADE_CUSTO'].errors}">
					<option value="Unitario">Unitário (Un.)</option>
					<option value="Metro Quadrado">Metro Quadrado (m²)</option>
					<option value="Linear">Metro Linear (m)</option>
					<option value="areaXespessura">Área x Espessura (m²*mm)</option>
				</select>
			</div>
			<div class="col-md-2 form-group">
				<label>Custo</label>
				<input type="text" class="form-control" [ngClass]="{'error': submitted && servicosForm.controls['CUSTO_POR_UNIDADE'].errors}" formControlName="CUSTO_POR_UNIDADE">
			</div>
			<div class="col-md-2 form-group">
				<label>Prazo Conclusão</label>
				<input type="text" class="form-control"  formControlName="PRZ_CONCLUSAO">
			</div>
			<div class="col-md-2 form-group">
				<label>Beneficiario</label>
				<select class="form-control" formControlName="ID_BENEFICIADO" [ngClass]="{'error': submitted && servicosForm.controls['ID_BENEFICIADO'].errors}">
					<option *ngFor="let item of comboBeneficiados" [ngValue]="item.VALOR">{{item.LABEL}}</option>
				</select>
			</div>		
			<div class="col-md-8 form-group">
				<label>Observação</label>
				<textarea type="text" class="form-control" formControlName="OBS" rows="1"></textarea>
			</div>
		</div>

	</form>
	<div class="actions col-md-12">
		<button mat-button color="primary" class="btn" (click)="submitServicos()">Salvar <mat-icon>save</mat-icon></button>
	</div>
</div>