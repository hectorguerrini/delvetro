<div>


	<div class="row">
		<div class="col-md-4 met1">
			<h3>Total Pedidos</h3>
			<span>{{cabecalho.valPedidos | currency:'BRL'}}</span>
		</div>
		<div class="col-md-4 met2">
			<h3>Faturamento</h3>
			<div class="chart" [chart]="chart"></div>
			<span>{{cabecalho.valCaixa | currency:'BRL'}}</span>
			<select class="form-control col-md-6"  [(ngModel)]="mesFiltro" (change)="getGrafico()" >
				<option *ngFor="let item of comboMes" value="{{item.valor}}">{{item.label}}</option>
				
			</select>
		</div>
	</div>

	<div class="tabela">
		<div class="header">
			<span>Pedidos</span>
			<span>Caixa</span>
		</div>
		<table class="table">
			<colgroup>
				<col width="20%">
				<col width="30%">
				<col width="25%">
				<col width="25%">
			</colgroup>
			<thead>
				<tr>
					<th>
						<div class="input-group">
							<input class="form-control dp" (dateSelect)="onDateSelection($event)" [maxDate]="today" placeholder="yyyy-mm-dd"
							 name="dp1" [(ngModel)]="fromDate" ngbDatepicker #d1="ngbDatepicker" (click)="d1.toggle()">
							<input class="form-control dp" (dateSelect)="onDateSelection($event)" [maxDate]="today" placeholder="yyyy-mm-dd"
							 name="dp2" [(ngModel)]="toDate" ngbDatepicker #d2="ngbDatepicker" (click)="d2.toggle()">
						</div>
					</th>
					<th><input class="form-control" type="text" placeholder="Pesquisa" [(ngModel)]="cliente" (ngModelChange)="getListaVendas()"></th>
					<th><input class="form-control" type="text" placeholder="Pesquisa"></th>
					<th>
						<div class="btn-group">
							<button type="button" class="btn btn-outline-dark" [class.active]="isActive('NPago')" (click)="setActive('NPago')">Não
								Pago</button>
							<button type="button" class="btn btn-outline-dark" [class.active]="isActive('Pago')" (click)="setActive('Pago')">Pago/Parcial</button>
						</div>
					</th>
				</tr>
				<tr>
					<th>Data Pedido</th>
					<th>Cliente</th>
					<th>Serviços</th>
					<th>Valor</th>
				</tr>
			</thead>
			<tbody>
				<tr class="total">
					<td>{{tabelaTotal.coluna1}} Pedido{{tabelaTotal.coluna1 > 1? 's' : ''}}</td>
					<td>{{tabelaTotal.coluna2}}</td>
					<td>{{tabelaTotal.coluna3}}</td>
					<td>{{tabelaTotal.coluna5 | currency:'BRL'}}/{{tabelaTotal.coluna4 | currency:'BRL'}}</td>
				</tr>
				<tr class="acc" *ngFor="let item of paginacao.lista" (click)="open(item)">
					<td colspan="4">
						<div>
							<table class="table2">
								<colgroup>
									<col width="20%">
									<col width="30%">
									<col width="25%">
									<col width="25%">
								</colgroup>
								<tbody>
									<tr>
										<td class="text-center">{{item.ven_data | date:'dd/MM/yyyy'}}</td>
										<td>{{item.ven_responsavel}}</td>
										<td>{{item.ven_status}}</td>
										<td class="text-center">
											<span>{{item.ven_total | currency:'BRL'}}
												<i placement="top" ngbTooltip="{{item.qtde_pago | currency: 'BRL'}}" class="material-icons" [ngClass]="{'pago': item.status_pagamento == 'Pago' ? true : '','parcial': item.status_pagamento == 'Parcial' ? true : ''  }">done</i>
											</span>
										</td>
									</tr>
								</tbody>
							</table>
							<table class="table3" [ngClass]="{'open': openRow == item.ven_codigo}">
								<tbody>
									<tr>
										<th>Produto</th>
										<th>Categoria</th>
										<th>Setor</th>
										<th>Altura</th>
										<th>Largura</th>
										<th>Metro</th>
										<th>Qtde</th>
									</tr>
									<tr *ngFor="let produto of item.produtos">
										<td>{{produto.pro_nome}}</td>
										<td class="text-center">{{produto.pro_categoria}}</td>
										<td class="text-center">{{produto.pro_setor}}</td>
										<td class="text-center">{{produto.altura}}</td>
										<td class="text-center">{{produto.largura}}</td>
										<td class="text-center">{{produto.metro}}</td>
										<td class="text-center">{{produto.qtde}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</td>
				</tr>
				<tr>
					<td colspan="4">
						<mat-paginator *ngIf="paginacao.lista"
						 
						 [length]="paginacao.length" [pageSize]="paginacao.pageSize"
						 [pageSizeOptions]="paginacao.pageSizeOptions" (page)="page($event)">
						</mat-paginator>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
